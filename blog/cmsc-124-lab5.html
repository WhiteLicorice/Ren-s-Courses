<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><base href=/Ren-s-Courses/ ><script src="https://cdn.tailwindcss.com?plugins=typography"></script><script>tailwind.config={theme:{extend:{colors:{primary:tailwind.colors.red,"github-dark":"#24292e"},fontFamily:{sans:["Inter","ui-sans-serif","system-ui"],serif:["Merriweather","Georgia","serif"]}}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/katorlys/prism-theme-github/themes/prism-theme-github-dark.css><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/prism.min.js data-manual integrity="sha512-UOoJElONeUNzQbbKQbjldDf9MwOHqxNz49NNJJ1d90yp+X9edsHyJoAs6O4K19CZGaIdjI5ohK+O2y5lBTW6uQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-python.min.js integrity="sha512-3qtI9+9JXi658yli19POddU1RouYtkTEhTHo6X5ilOvMiDfNvo6GIS6k2Ukrsx8MyaKSXeVrnIWeyH8G5EOyIQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-nasm.min.js integrity="sha512-zdmZCKfEirT3AOxxgIwXpIyik7DSpYOnzXujg8duM6ICokx243tPnCTgqiQN+TAhLSMO2UF11C/+gO1DrI+A8A==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-bash.min.js integrity="sha512-35RBtvuCKWANuRid6RXP2gYm4D5RMieVL/xbp6KiMXlIqgNrI7XRUh9HurE8lKHW4aRpC0TZU3ZfqG8qmQ35zA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-powershell.min.js integrity="sha512-dnJS1fxEUNZirzvtoG39P8JWa8DajX420LajzUbn+taV6hd9BfnHHgpPAWNADYjNRPT1Gt4v4/XGMULqi0uqVQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-kotlin.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/components/prism-c.min.js integrity="sha512-EWIJI7uQnA8ClViH2dvhYsNA7PHGSwSg03FAfulqpsFiTPHfhdQIvhkg/l3YpuXOXRF2Dk0NYKIl5zemrl1fmA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdn.jsdelivr.net/npm/prismjs@1/components/prism-gdscript.min.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/plugins/show-language/prism-show-language.min.css integrity="sha512-09fmad4VA38AJxIRtkrW3DmKI2PsTsEpx3bfR8ZmkQunfQ9jORIieKVREv6fVLmqdnrFbPkCO5PKTnBIIvswBg==" crossorigin=anonymous referrerpolicy=no-referrer><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/9000.0.1/plugins/show-language/prism-show-language.min.js integrity="sha512-WZeiH/5UJ3HZsxGBbWWIBluPrC/PIHbs/x1GtCP7lky8XbHXEzYfI9PJkL0d7/LdL7DvzHFScNkic8PaNhh+qg==" crossorigin=anonymous referrerpolicy=no-referrer></script><style>pre[class=language-]{position:relative;overflow:auto}pre[class*=language-][data-language] code{display:block;padding-top:1.5em}pre[class*=language-][data-language]::before{content:attr(data-language);color:#000;background-color:#cfcfcf;width:fit-content;white-space:nowrap;position:absolute;top:0;left:0;font-size:.9em;border-radius:0 0 5px 0;padding:0 .5em;text-shadow:none}</style><body class="min-h-screen min-h-full bg-github-dark font-serif text-gray-200"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex min-h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a href><div class="flex items-center justify-between"><div class="h-6 text-2xl font-semibold sm:block text-primary-800">Ren&#x27;s Courses</div></div></a></div><div class="flex items-center space-x-4 leading-5 sm:space-x-6"><a href="" class="hidden font-medium text-gray-100 sm:block">Home </a><a href=tags class="hidden font-medium text-gray-100 sm:block">Materials </a><a href=https://forms.gle/mRFBXwhuR3LdvSN3A class="hidden font-medium text-gray-100 sm:block">Submissions </a><a href=https://github.com/WhiteLicorice/Ren-s-Courses class="hidden font-medium text-gray-100 sm:block"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" class="hover:text-primary-400 h-6 w-6 fill-current text-gray-200"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><button id=toggle-button aria-label="Toggle Menu" class=sm:hidden><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 20 20" fill=currentColor class="h-8 w-8 text-gray-100"><path fill-rule=evenodd d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule=evenodd></path></svg></button><div id=mobile-menu class="fixed left-0 top-0 z-10 h-full w-full hidden translate-x-full transform duration-300 ease-in-out bg-gray-950 opacity-[0.98]"><div class="flex justify-end"><button id=close-mobile-menu-button class="mr-8 mt-11 h-8 w-8" aria-label="Toggle Menu"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 20 20" fill=currentColor class=text-gray-100><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule=evenodd></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a href="" class="text-2xl font-bold tracking-widest text-gray-100">Home</a></div><div class="px-12 py-4"><a href=tags class="text-2xl font-bold tracking-widest text-gray-100">Materials</a></div><div class="px-12 py-4"><a href=https://forms.gle/mRFBXwhuR3LdvSN3A class="text-2xl font-bold tracking-widest text-gray-100">Submissions</a></div><div class="px-12 py-4"><a href=https://github.com/WhiteLicorice/Ren-s-Courses class="text-2xl font-bold tracking-widest text-gray-100"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" class="hover:text-primary-400 h-6 w-6 fill-current text-gray-200"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div></nav></div></div></header><script>const toggleMobileMenu=()=>{const e=document.querySelector("#mobile-menu");e.classList.toggle("translate-x-full"),e.classList.toggle("hidden")};document.querySelector("#toggle-button").addEventListener("click",toggleMobileMenu),document.querySelector("#close-mobile-menu-button").addEventListener("click",toggleMobileMenu)</script><main class=mb-auto><article><div class="xl:divide-y xl:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class=space-y-10><div><dt class=sr-only>Published on<dd class="text-base font-medium leading-6 text-gray-400"><time datetime=2025-11-04T00:00:00.000>November 4, 2025</time></div></dl><div class="prose prose-invert mx-auto"><h1>Functions</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y pb-8 divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6 xl:divide-y-0"><dl class="pb-10 pt-6 xl:border-b xl:pt-11 xl:border-gray-700"><dt class=sr-only>Authors<dd><ul class="flex flex-wrap justify-center gap-4 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><dl class="whitespace-nowrap text-sm font-medium leading-5"><dt class=sr-only>Name<dd class="text-gray-900 dark:text-gray-100 flex gap-1 items-center">Rene Andre Bedonia Jocsing<a target=_blank rel="noopener noreferrer" href=https://github.com/WhiteLicorice class="flex gap-1 items-center text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" class="hover:text-primary-400 w-4 h-4 fill-current text-gray-200"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a target=_blank rel="noopener noreferrer" href="https://drive.google.com/file/d/1M0n0_Y1DZG90mKMWd1saM7jjoFs8EyIq/view?usp=drive_link" class="flex gap-1 text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" class="hover:text-primary-400 w-4 h-4 fill-current text-gray-200"><path d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6H6z M13 3.5L18.5 9H13V3.5z"></path></svg></a></dl></ul></dl><div class="divide-y divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose prose-invert max-w-none pb-8 pt-10"><p>Welcome to the last leg of your language hacking journey. You've built a scanner, parser, and evaluator, then added scoping to your interpreter. Now it's time to add the features that will transform your interpreter from a sophisticated calculator into a real programming language: <strong>control flow</strong> and <strong>functions</strong>.<p>Control flow lets your programs make decisions and repeat operations. Functions let you package reusable chunks of code. Together, these features give your language the power to solve real problems, taking one step closer to Turing-completeness. A programming language without these constructs is like a car without a steering wheel—it can move, but you can't really go anywhere interesting.<p>This final lab represents the culmination of everything you've learned. By the end, you'll have implemented a complete, Turing-complete programming language. That's no small feat!<h2 id=if-else>If-Else</h2><p>Every useful program needs to make decisions. Should we execute this code or that code? Should we repeat this operation or move on? This is what control flow constructs enable.<p>The most fundamental control flow construct is the <strong>if statement</strong>. It evaluates a condition and executes different code depending on whether the condition is true or false:<pre><code class=language-kotlin>if (temperature &gt; 30) {
    print &quot;It's hot!&quot;;
} else {
    print &quot;It's comfortable.&quot;;
}
</code></pre><p>The condition (the expression in parentheses) gets evaluated to a boolean value using your truthiness rules from Lab 3. If it's truthy, execute the first branch. If it's falsey, execute the else branch (if one exists).<p>Your grammar might look like:<pre><code>statement      → exprStmt | printStmt | varDecl | block | ifStmt ;
ifStmt         → &quot;if&quot; &quot;(&quot; expression &quot;)&quot; statement ( &quot;else&quot; statement )? ;
</code></pre><p>Notice that the branches are statements, not just blocks. This allows single-statement branches without braces, though many style guides discourage this. It also enables <strong>cascading if-else chains</strong>. Like so:<pre><code class=language-kotlin>if (score &gt;= 90) {
    grade = &quot;A&quot;;
} else if (score &gt;= 80) {
    grade = &quot;B&quot;;
} else if (score &gt;= 70) {
    grade = &quot;C&quot;;
} else {
    grade = &quot;F&quot;;
}
</code></pre><p>This works because the <code>else if</code> is really an <code>else</code> containing another <code>if</code> statement.<h2 id=the-dangling-else-problem>The Dangling Else Problem</h2><p>If you allow if statements without braces, you'll encounter a classic parsing ambiguity. Consider:<pre><code class=language-kotlin>if (first)
    if (second)
        print &quot;both&quot;;
    else
        print &quot;???&quot;;
</code></pre><p>Which <code>if</code> does the <code>else</code> belong to? The grammar is ambiguous—it allows two different parse trees. Most languages resolve this by having the <code>else</code> bind to the nearest <code>if</code>. Your parser should naturally do this if you implement the grammar correctly, but be aware of the issue.<h2 id=loops>Loops</h2><p>The second pillar of control flow is repetition. While you could achieve repetition with recursion and if statements (and some languages do!), loops are more intuitive for most programmers.<p>The <strong>while loop</strong> is the simplest. It repeatedly executes a statement as long as a condition remains true:<pre><code class=language-kotlin>var i = 0;
while (i &lt; 10) {
    print i;
    i = i + 1;
}
</code></pre><p>Your grammar may add:<pre><code>statement      → ... | whileStmt ;
whileStmt      → &quot;while&quot; &quot;(&quot; expression &quot;)&quot; statement ;
</code></pre><p>The implementation is straightforward: evaluate the condition, and if truthy, execute the body statement. Then loop back and check the condition again. Repeat until the condition becomes falsey.<p>Most languages also include a <strong>for loop</strong>. The for loop is really just syntactic sugar—a more convenient way to write a common pattern. The classic C-style for loop has three parts: an initializer, a condition, and an increment:<pre><code class=language-kotlin>for (var i = 0; i &lt; 10; i = i + 1) {
    print i;
}
</code></pre><p>This is equivalent to:<pre><code class=language-kotlin>{
    var i = 0;
    while (i &lt; 10) {
        print i;
        i = i + 1;
    }
}
</code></pre><p>Your grammar might be:<pre><code>statement      → ... | forStmt ;
forStmt        → &quot;for&quot; &quot;(&quot; ( varDecl | exprStmt | &quot;;&quot; )
                 expression? &quot;;&quot;
                 expression? &quot;)&quot; statement ;
</code></pre><p>The three parts are all optional, which is why you see the <code>?</code> markers. An infinite loop would be <code>for (;;) { ... }</code>.<p>When executing a for loop, you can desugar it into the while loop equivalent during parsing or evaluation. This keeps your implementation simpler—you don't need separate logic for for loops.<h2 id=logical-operators>Logical Operators</h2><p>With control flow, you'll often need to combine conditions. <strong>Logical operators</strong> <code>and</code> and <code>or</code> (or <code>&amp;&amp;</code> and <code>||</code> in C-style syntax) fill this role:<pre><code class=language-kotlin>if (temperature &gt; 30 and humidity &gt; 80) {
    print &quot;It's hot AND humid!&quot;;
}
</code></pre><p>These operators are special because they <strong>short-circuit</strong>. The <code>and</code> operator only evaluates its right operand if the left operand is true. The <code>or</code> operator only evaluates its right operand if the left operand is false. This isn't just an optimization—it affects program semantics.<p>Consider:<pre><code class=language-kotlin>if (denominator != 0 and numerator / denominator &gt; 1) {
    print &quot;Ratio is greater than 1&quot;;
}
</code></pre><p>If <code>denominator</code> is zero, the right side never evaluates, avoiding a division-by-zero error. Without short-circuiting, this code would crash.<p>Your grammar needs to place these operators at the right precedence level. For example:<pre><code>expression     → assignment ;
assignment     → IDENTIFIER &quot;=&quot; assignment | logicOr ;
logicOr        → logicAnd ( &quot;or&quot; logicAnd )* ;
logicAnd       → equality ( &quot;and&quot; equality )* ;
</code></pre><p>The <code>or</code> operator has lower precedence than <code>and</code>, matching how we think about them in natural language.<h2 id=functions>Functions</h2><p>Functions are one of the most important abstractions in programming. They let you:<ul><li>Package code for reuse<li>Give meaningful names to operations<li>Hide implementation details<li>Reduce code duplication<li>Build programs compositionally</ul><p>A function declaration might look like:<pre><code class=language-kotlin>fun greet(name) {
    print &quot;Hello, &quot; + name + &quot;!&quot;;
}
</code></pre><p>And you call it like:<pre><code class=language-kotlin>greet(&quot;Alice&quot;);
greet(&quot;Bob&quot;);
</code></pre><p>Your grammar may extend to include function declarations and calls:<pre><code>declaration    → funDecl | varDecl | statement ;
funDecl        → &quot;fun&quot; IDENTIFIER &quot;(&quot; parameters? &quot;)&quot; block ;
parameters     → IDENTIFIER ( &quot;,&quot; IDENTIFIER )* ;

primary        → ... | IDENTIFIER | &quot;(&quot; expression &quot;)&quot; ;
call           → primary ( &quot;(&quot; arguments? &quot;)&quot; )* ;
arguments      → expression ( &quot;,&quot; expression )* ;
</code></pre><p>Notice that calls are postfix operators on expressions. You can call any expression that evaluates to a callable value: <code>getFunction()()</code>.<h2 id=function-objects-and-closures>Function Objects and Closures</h2><p>When you declare a function, what actually happens? You need to store information about the function so you can execute it later when it's called. Most implementations create a <strong>function object</strong> that contains:<ul><li>The function's parameter names<li>The function body (as an AST node)<li>The environment where the function was declared (for closures)</ul><p>This function object gets stored in your environment just like any other value. The function's name is a variable that holds a reference to the function object.<p>The environment capture is crucial for <strong>closures</strong>—functions that &quot;close over&quot; and remember variables from their enclosing scope. Do closures exist in your language? If so, this is where you implement them.<pre><code class=language-kotlin>fun makeCounter() {
    var count = 0;
    fun increment() {
        count = count + 1;
        return count;
    }
    return increment;
}

var counter = makeCounter();
print counter();  // 1
print counter();  // 2
print counter();  // 3
</code></pre><p>The <code>increment</code> function remembers the <code>count</code> variable even after <code>makeCounter</code> has returned. This is only possible if the function stores a reference to the environment where it was created.<h2 id=calling-functions>Calling Functions</h2><p>When a function is called, you need to:<ol><li>Evaluate all argument expressions<li>Create a new environment for the function execution<li>The new environment's parent should be the function's closure environment (where it was declared), not the current environment (where it's being called)<li>Bind parameter names to argument values in the new environment<li>Execute the function body in this new environment<li>Return the result (if any)</ol><p>This process is called <strong>dynamic dispatch</strong>—deciding at runtime which code to execute based on what function object you're calling.<h2 id=return-statements>Return Statements</h2><p>Functions need a way to send values back to their callers. The <code>return</code> statement does this:<pre><code class=language-kotlin>fun add(a, b) {
    return a + b;
}

var result = add(3, 5);
print result;  // 8
</code></pre><p>Your grammar adds:<pre><code>statement      → ... | returnStmt ;
returnStmt     → &quot;return&quot; expression? &quot;;&quot; ;
</code></pre><p>The expression is optional—<code>return;</code> with no value is valid. This implicitly returns <code>nil</code> (or your language's equivalent).<p>Implementing return is tricky because it needs to unwind the call stack, potentially exiting through multiple nested statements and blocks. Many implementations use exceptions for control flow here. When you execute a return statement, you can trivially throw a special &quot;return exception&quot; that carries the return value. The function call catches this exception and uses the value as the function's result.<h2 id=native-functions>Native Functions</h2><p>Before users can write functions, your interpreter needs at least one function they can call—otherwise there's no way to get the ball rolling. Most languages provide <strong>native functions</strong> (also called built-in or primitive functions) implemented in the host language.<p>For example, you might want a <code>clock()</code> function that returns the current time, or a <code>readLine()</code> function for user input. These can't be implemented in your language because they need to access host language capabilities.<p>Implement native functions as callable objects that execute host language code instead of interpreting AST nodes. Add them to your global environment before executing any user code.<h2 id=arity-checking>Arity Checking</h2><p>Functions have a specific number of parameters (their <strong>arity</strong>). Most languages require that calls provide exactly the right number of arguments:<pre><code class=language-kotlin>fun add(a, b) {
    return a + b;
}

add(1, 2);     // OK
add(1);        // Error: Expected 2 arguments but got 1
add(1, 2, 3);  // Error: Expected 2 arguments but got 3
</code></pre><p>Check arity when calling functions and report clear errors for mismatches. This catches bugs early.<p>Some languages allow default parameters or variadic functions (accepting any number of arguments). These are optional enhancements if you want to implement them.<h2 id=recursion>Recursion</h2><p>One beautiful consequence of your implementation is that recursion should &quot;just work.&quot; Since function names are variables in the environment, and that environment is accessible during function execution, a function can call itself:<pre><code class=language-kotlin>fun fibonacci(n) {
    if (n &lt;= 1) return n;
    return fibonacci(n - 1) + fibonacci(n - 2);
}

print fibonacci(10);  // 55
</code></pre><p>Make sure your implementation handles this correctly. Test with recursive functions, including mutually recursive functions (where function A calls function B, which calls function A).<h2 id=laboratory-deliverables>Laboratory Deliverables</h2><h3 id=grammar-extension>Grammar Extension</h3><p>Update your language's grammar to include control flow and functions. Add production rules for:<ul><li>If statements (with optional else)<li>While loops<li>For loops<li>Logical operators (and, or)<li>Function declarations<li>Function calls<li>Return statements</ul><p>Document these in your README.md under the Grammar section. Your complete grammar should now describe a Turing-complete programming language.<h3 id=control-flow-implementation>Control Flow Implementation</h3><p>Extend your parser and evaluator to support:<ul><li>If-else statements with correct precedence<li>While loops<li>For loops (can be desugared to while loops)<li>Short-circuiting logical operators<li>Proper scoping for loop variables</ul><h3 id=function-implementation>Function Implementation</h3><p>Implement functions with:<ul><li>Function declaration statements<li>Function call expressions<li>Parameter binding<li>Return statements (including early returns)<li>Closures (capturing enclosing environment)<li>Proper environment management for calls<li>Arity checking with clear error messages</ul><h3 id=native-functions-1>Native Functions</h3><p>Add at least two native functions to your language. Suggested examples:<ul><li><code>clock()</code>: Returns current time in seconds<li><code>print(value)</code>: Prints a value (if not already a statement)<li><code>readLine()</code>: Reads user input<li><code>toString(value)</code>: Converts value to string</ul><h3 id=comprehensive-testing>Comprehensive Testing</h3><p>Create test programs demonstrating:<ul><li>Conditional execution (if-else)<li>Loops (while and for)<li>Nested control flow<li>Function declaration and calling<li>Recursive functions<li>Closures<li>Higher-order functions (functions that take or return functions)<li>Error handling (wrong arity, etc.)</ul><p>You should have several script files showcasing your language's capabilities. These will be demonstrated during your final defense.<h3 id=language-showcase>Language Showcase</h3><p>Write at least one non-trivial program in your language that demonstrates its capabilities. Add this as an example program in your repository (perhaps in an <code>examples/</code> directory).<p>As always, commit your changes with meaningful messages. This is the final major addition to your interpreter—you should be proud of what you've built!<hr><h2 id=expected-output>Expected Output</h2><p><strong>Control Flow:</strong><pre><code class=language-kotlin>&gt; var x = 5;
&gt; if (x &gt; 3) print &quot;x is big&quot;;
x is big
&gt; if (x &gt; 10) {
&gt;     print &quot;x is huge&quot;;
&gt; } else {
&gt;     print &quot;x is not that big&quot;;
&gt; }
x is not that big
&gt; var i = 0;
&gt; while (i &lt; 3) {
&gt;     print i;
&gt;     i = i + 1;
&gt; }
0
1
2
&gt; for (var j = 0; j &lt; 3; j = j + 1) {
&gt;     print j;
&gt; }
0
1
2
&gt; if (true or false) print &quot;yep&quot;;
yep
&gt; if (false and true) print &quot;nope&quot;; else print &quot;correct&quot;;
correct
</code></pre><p><strong>Functions:</strong><pre><code class=language-kotlin>&gt; fun greet(name) {
&gt;     print &quot;Hello, &quot; + name + &quot;!&quot;;
&gt; }
&gt; greet(&quot;Alice&quot;);
Hello, Alice!
&gt; fun add(a, b) {
&gt;     return a + b;
&gt; }
&gt; print add(3, 5);
8
&gt; fun fibonacci(n) {
&gt;     if (n &lt;= 1) return n;
&gt;     return fibonacci(n - 1) + fibonacci(n - 2);
&gt; }
&gt; print fibonacci(10);
55
&gt; fun makeCounter() {
&gt;     var count = 0;
&gt;     fun increment() {
&gt;         count = count + 1;
&gt;         return count;
&gt;     }
&gt;     return increment;
&gt; }
&gt; var counter = makeCounter();
&gt; print counter();
1
&gt; print counter();
2
&gt; print counter();
3
&gt; greet();
[line 1] Runtime error: Expected 1 arguments but got 0.
&gt; add(1, 2, 3);
[line 1] Runtime error: Expected 2 arguments but got 3.
</code></pre><p><strong>Example script file (<code>fibonacci.txt</code>):</strong><pre><code class=language-kotlin>// Recursive Fibonacci implementation
fun fibonacci(n) {
    if (n &lt;= 1) {
        return n;
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}

// Print first 15 Fibonacci numbers
for (var i = 0; i &lt; 15; i = i + 1) {
    print &quot;fib(&quot; + i + &quot;) = &quot; + fibonacci(i);
}
</code></pre><p><strong>Output:</strong><pre><code class=language-bash>$ java -jar language.jar fibonacci.txt
fib(0) = 0
fib(1) = 1
fib(2) = 1
fib(3) = 2
fib(4) = 3
fib(5) = 5
fib(6) = 8
fib(7) = 13
fib(8) = 21
fib(9) = 34
fib(10) = 55
fib(11) = 89
fib(12) = 144
fib(13) = 233
fib(14) = 377
</code></pre><p><strong>Example script file (<code>closures.txt</code>):</strong><pre><code class=language-kotlin>// Demonstrate closures
fun makePrinter(prefix) {
    fun print(message) {
        print prefix + &quot;: &quot; + message;
    }
    return print;
}

var errorPrinter = makePrinter(&quot;ERROR&quot;);
var infoPrinter = makePrinter(&quot;INFO&quot;);
</code></pre></div></div><footer><div class="text-sm font-medium leading-5 divide-gray-700 xl:col-start-1 xl:row-start-2 xl:divide-y"><div class="py-4 xl:py-8"><h2 class="text-xs uppercase tracking-wide text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="text-primary-500 hover:text-primary-400 mr-3 text-sm font-medium uppercase" href=tags/cmsc-124>cmsc-124</a></div></div></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-400" aria-label="Back to the home" href>← Back to home</a></div></footer></div></div></article><script>Prism.highlightAll()</script></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target=_blank rel="noopener noreferrer" href=https://github.com/WhiteLicorice/Ren-s-Courses><span class=sr-only>github</span> <svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24" class="hover:text-primary-400 h-6 w-6 fill-current text-gray-200"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-400"><a target=_blank rel="noopener noreferrer" href=https://github.com/BlazorStatic/BlazorStatic>Powered by Blazor</a><div>•</div><div>© 2025</div></div></div></footer></div></div><blazor-focus-on-navigate selector=h1></blazor-focus-on-navigate>
