<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />

    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <link href="css/app.css" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    @* START PRISM SETUP *@
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/katorlys/prism-theme-github/themes/prism-theme-github-dark.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" data-manual></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-nasm.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-powershell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-kotlin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-c.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-gdscript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-csharp.min.js"></script>

    @* GLOBAL STYLES *@
    <style>
        /* ============================== */
        /* 1. CUSTOM IDE / PRISM STYLES   */
        /* ============================== */

        /* Terminal Window Container (The Wrapper) */
        /* This holds the background and border so they don't scroll */
        .code-wrapper {
            position: relative;
            margin-top: 2rem !important;
            margin-bottom: 2rem !important;
            background-color: #010409 !important;
            border: 1px solid #30363d;
            border-radius: 0.375rem;
            /* rounded-md */
            overflow: hidden;
            /* Ensure corners clip content */
        }

        /* The Scrollable Code Area */
        .prose pre {
            margin: 0 !important;
            background-color: transparent !important;
            border: none !important;
            overflow-x: auto;
            /* Allow scrolling */

            /* DEFAULT PADDING (No Label) */
            /* Enough top padding to clear the Copy Button (top-right) */
            padding-top: 1rem !important;
            padding-bottom: 1rem !important;
            padding-left: 1rem !important;
            padding-right: 3rem !important;
            /* Right padding clears the button */
        }

        /* CONDITIONAL PADDING (With Label) */
        /* If wrapper has data-language, we need more top padding */
        .code-wrapper[data-language] pre {
            padding-top: 2.5rem !important;
        }

        /* Language Tab Label - Anchored to Wrapper */
        .code-wrapper[data-language]::before {
            content: attr(data-language);
            color: #8b949e;
            background-color: #161b22;
            border-right: 1px solid #30363d;
            border-bottom: 1px solid #30363d;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: lowercase;
            width: fit-content;
            white-space: nowrap;
            position: absolute;
            top: 0;
            left: 0;
            padding: 0.25rem 0.75rem;
            border-bottom-right-radius: 6px;
            z-index: 10;
            pointer-events: none;
            /* Let clicks pass through if needed */
        }

        /* Reset code padding */
        .prose pre code {
            display: block;
            padding: 0 !important;
        }

        /* ============================== */
        /* 2. NUCLEAR BACKTICK REMOVAL    */
        /* ============================== */

        /* Use :not(:where(pre *)) to ensure we ONLY target inline code */
        .prose :where(code):not(:where([class~="not-prose"] *)):not(:where(pre *))::before,
        .prose :where(code):not(:where([class~="not-prose"] *)):not(:where(pre *))::after {
            content: "" !important;
            display: none !important;
        }

        /* Style ONLY inline code pills (Exclude pre blocks) */
        .prose :where(code):not(:where([class~="not-prose"] *)):not(:where(pre *)) {
            background-color: rgba(239, 68, 68, 0.1);
            /* Red-500 10% */
            color: #ef4444;
            /* Red-500 */
            border-radius: 0.25rem;
            padding: 0.125rem 0.375rem;
            font-weight: 400;
        }

        /* ============================== */
        /* 3. COPY BUTTON STYLES          */
        /* ============================== */
        /* Anchored to the Wrapper, so it stays fixed while code scrolls */
        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2rem;
            height: 2rem;
            color: #8b949e;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid #30363d;
            border-radius: 0.375rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.2s ease;
            z-index: 20;
        }

        /* Show on hover of the WRAPPER */
        .code-wrapper:hover .copy-button,
        .copy-button:focus {
            opacity: 1;
        }

        .copy-button:hover {
            background-color: #21262d;
            color: #f0f6fc;
            border-color: #8b949e;
        }

        .copy-button svg {
            width: 1rem;
            height: 1rem;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .copy-button.copied {
            color: #238636;
            /* Github Green */
            border-color: #238636;
        }

        /* ============================== */
        /* 4. TECHNO GLITCH EFFECTS       */
        /* ============================== */
        .glitch-target {
            position: relative;
        }

        /* Create two pseudo-elements with the same text */
        .glitch-target::before,
        .glitch-target::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0d1117;
            /* Match background color to hide main text during glitch */
        }

        /* Layer 1: Red/Magenta shift */
        .glitch-target::before {
            left: 2px;
            text-shadow: -2px 0 #ff00c1;
            clip-path: inset(0 0 0 0);
            animation: techno-glitch-1 4s infinite linear alternate-reverse;
            z-index: -1;
        }

        /* Layer 2: Blue/Cyan shift */
        .glitch-target::after {
            left: -2px;
            text-shadow: 2px 0 #00fff9;
            clip-path: inset(0 0 0 0);
            animation: techno-glitch-2 3s infinite linear alternate-reverse;
            z-index: -2;
        }

        /* NOTE: We use @@keyframes to escape the Razor syntax! */
        @@keyframes techno-glitch-1 {
            0% {
                clip-path: inset(20% 0 50% 0);
                transform: skew(1deg);
            }

            2% {
                clip-path: inset(10% 0 85% 0);
                transform: skew(0.5deg);
            }

            4% {
                clip-path: inset(80% 0 5% 0);
                transform: skew(2deg);
            }

            5%,
            95% {
                clip-path: inset(0 0 0 0);
                transform: skew(0);
                text-shadow: none;
                background: transparent;
            }

            96% {
                clip-path: inset(50% 0 30% 0);
                transform: skew(1deg);
                text-shadow: -2px 0 #ff00c1;
                background: #0d1117;
            }

            100% {
                clip-path: inset(10% 0 60% 0);
                transform: skew(2deg);
            }
        }

        @@keyframes techno-glitch-2 {
            0% {
                clip-path: inset(15% 0 60% 0);
                transform: skew(-2deg);
            }

            1% {
                clip-path: inset(40% 0 30% 0);
                transform: skew(-1deg);
            }

            /* Long pause */
            2%,
            98% {
                clip-path: inset(0 0 0 0);
                transform: skew(0);
                text-shadow: none;
                background: transparent;
            }

            /* Quick buzz at the end */
            99% {
                clip-path: inset(5% 0 80% 0);
                transform: skew(-3deg);
                text-shadow: 2px 0 #00fff9;
                background: #0d1117;
            }

            100% {
                clip-path: inset(70% 0 10% 0);
                transform: skew(-1deg);
            }
        }
    </style>
    <HeadOutlet />
</head>

<body class="min-h-screen bg-bgDark font-sans text-gray-300 antialiased selection:bg-red-900 selection:text-white">
    <Routes />

    @* SCRIPT: Labels & Copy Button *@
    <script>
        window.addCodeFeatures = () => {
            const langMap = {
                'cs': 'c#', 'csharp': 'c#', 'cpp': 'c++', 'c': 'c', 'py': 'python', 'python': 'python',
                'js': 'js', 'javascript': 'js', 'ts': 'ts', 'typescript': 'ts', 'html': 'html', 'xml': 'xml',
                'json': 'json', 'yaml': 'yaml', 'md': 'markdown', 'bash': 'bash', 'sh': 'sh',
                'powershell': 'powershell', 'nasm': 'asm', 'asm': 'asm', 'gdscript': 'gdscript'
            };

            const iconCopy = `<rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>`;
            const iconCheck = `<polyline points="20 6 9 17 4 12"/>`;

            // 1. TARGET ALL PRE BLOCKS inside the prose area
            // This ensures even unlabeled code blocks get the button
            const preBlocks = document.querySelectorAll('.prose pre');

            preBlocks.forEach(pre => {
                // 1. Check if already wrapped (Prevent double wrapping on nav)
                if (pre.parentElement.classList.contains('code-wrapper')) return;

                // 2. Create Wrapper
                const wrapper = document.createElement('div');
                wrapper.className = 'code-wrapper';

                // 3. Insert Wrapper before Pre, then move Pre inside it
                pre.parentElement.insertBefore(wrapper, pre);
                wrapper.appendChild(pre);

                // ---------------------------
                // A. Language Label Logic
                // ---------------------------
                const className = [...pre.classList].find(c => c.startsWith('language-'));
                if (className) {
                    const rawLang = className.replace('language-', '').toLowerCase();
                    const label = langMap[rawLang] || rawLang;
                    // Apply attribute to WRAPPER so label stays fixed
                    wrapper.setAttribute('data-language', label);
                }

                // ---------------------------
                // B. Copy Button Logic
                // ---------------------------
                const btn = document.createElement('button');
                btn.className = 'copy-button';
                btn.ariaLabel = "Copy code";
                btn.innerHTML = `<svg viewBox="0 0 24 24">${iconCopy}</svg>`;

                btn.addEventListener('click', () => {
                    const code = pre.querySelector('code');
                    if (!code) return;

                    navigator.clipboard.writeText(code.innerText).then(() => {
                        btn.classList.add('copied');
                        btn.innerHTML = `<svg viewBox="0 0 24 24">${iconCheck}</svg>`;
                        setTimeout(() => {
                            btn.classList.remove('copied');
                            btn.innerHTML = `<svg viewBox="0 0 24 24">${iconCopy}</svg>`;
                        }, 2000);
                    }).catch(err => {
                        console.error('Copy failed:', err);
                    });
                });

                // Append button to WRAPPER so it stays fixed
                wrapper.appendChild(btn);
            });

            // Just in case!
            if (window.Prism) {
                window.Prism.highlightAll();
            }
        };

        document.addEventListener("DOMContentLoaded", window.addCodeFeatures);
    </script>
</body>

</html>